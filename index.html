<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Para Elizabeth Valdivieso ‚Äì Ojos color miel</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0f1020; --bg2:#1a1b3a; --accent:#ff6ec7; --accent2:#ffd166; --leaf:#2dd4bf; --petal1:#ff6ec7; --petal2:#ff9a8b; --glow:#fbcfe8;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 70% 10%, #2a2b55 0%, var(--bg2) 35%, var(--bg1) 100%);
      color:#f8fafc; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .card{
      width:min(980px, 92vw); border-radius:28px; padding:28px 28px 20px; position:relative;
      background: rgba(255,255,255,.06);
      box-shadow: 0 10px 40px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.08);
      backdrop-filter: blur(6px);
    }
    .title{
      font-family:'Great Vibes', cursive;
      font-size: clamp(48px, 8vw, 92px);
      margin:12px 0 18px;
      text-align:center;
      background: linear-gradient(135deg, #ff6ec7, #ffd166);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 4px 24px rgba(255,110,199,.6);
      letter-spacing: 1px;
      animation: glowPulse 3s ease-in-out infinite;
    }
    @keyframes glowPulse {
      0%,100% { text-shadow: 0 4px 22px rgba(255,110,199,.55); }
      50% { text-shadow: 0 4px 32px rgba(255,209,102,.85); }
    }

    /* SUBT√çTULO MEJORADO */
    .subtitle{
      font-family: 'Great Vibes', cursive;
      font-size: clamp(28px, 4vw, 46px);
      text-align:center;
      margin-bottom:22px;
      background: linear-gradient(135deg, #ffd166, #ff6ec7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 3px 14px rgba(255,209,102,.6);
      animation: fadeSlide 3s ease-in-out, shimmer 6s linear infinite;
    }
    .subtitle strong{
      color: inherit;
      text-shadow: 0 0 18px rgba(255,110,199,.8);
    }
    @keyframes fadeSlide {
      0% {opacity:0; transform: translateY(15px);}
      100% {opacity:1; transform: translateY(0);}
    }
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    .stage{ display:grid; place-items:center; position:relative; }
    svg{ width:min(680px, 90vw); height:auto; display:block; }

    .controls{ display:flex; gap:12px; justify-content:center; margin-top:18px; flex-wrap:wrap; }
    button{
      appearance:none; border:none; border-radius:999px; padding:12px 18px; font-weight:600; cursor:pointer;
      background: linear-gradient(135deg, var(--accent), #a78bfa);
      color:white; box-shadow:0 10px 22px rgba(167,139,250,.3);
      transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
    }
    button.secondary{ background:linear-gradient(135deg, #22d3ee, #34d399); box-shadow:0 10px 22px rgba(52,211,153,.25); }
    button:hover{ transform: translateY(-2px); filter:brightness(1.05); }
    footer{ text-align:center; opacity:.8; font-size:12px; margin-top:10px; }
  </style>
</head>
<body>
  <main class="card" id="card">
    <h1 class="title">Para Elizabeth Valdivieso</h1>
    <br>
    <br>
    <br>
    <br>
    <div class="subtitle">Para la chica de <strong>ojos color miel</strong> que estoy conociendo <strong>Elizabeth Valdivieso</strong>üåπ</div>

    <div class="stage">
      <!-- Flor en SVG generada/animada por JS -->
      <svg id="flower" viewBox="-220 -220 440 440" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="petalGrad" cx="50%" cy="35%" r="70%">
            <stop offset="0%" stop-color="var(--petal2)"/>
            <stop offset="70%" stop-color="var(--petal1)"/>
            <stop offset="100%" stop-color="#d946ef"/>
          </radialGradient>
          <radialGradient id="centerGrad" cx="50%" cy="50%" r="60%">
            <stop offset="0%" stop-color="#fff7ae"/>
            <stop offset="60%" stop-color="var(--accent2)"/>
            <stop offset="100%" stop-color="#f59e0b"/>
          </radialGradient>
          <filter id="glow" x="-200%" y="-200%" width="400%" height="400%">
            <feGaussianBlur stdDeviation="6" result="b"/>
            <feMerge>
              <feMergeNode in="b"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <g id="petals" filter="url(#glow)"></g>
        <g id="leaves"></g>
        <circle id="center" r="38" fill="url(#centerGrad)" stroke="#fff2" stroke-width="2"></circle>
        <g id="sparkles"></g>
      </svg>
    </div>

    <div class="controls">
      <button id="bloomBtn">‚ú® Power Ranger Rosa</button>
      <button class="secondary" id="downloadBtn"></button>
    </div>
    <footer>Hecho con cari√±o por este loco amazonico, aunque este ausente pasa presente en mi mente, mi bonita casualidad ü•∞- <span id="today"></span></footer>
  </main>

  <script>
    // Utilidades
    const $ = (sel) => document.querySelector(sel);
    const petalCount = 14; // n√∫mero de p√©talos

    const petalsGroup = document.getElementById('petals');
    const leavesGroup = document.getElementById('leaves');
    const sparklesGroup = document.getElementById('sparkles');

    // Crear p√©talos
    function createPetal(angle){
      const g = document.createElementNS('http://www.w3.org/2000/svg','g');
      g.setAttribute('transform',`rotate(${angle})`);
      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      const w = 38, h = 120;
      const d = `M 0 0 C ${w} -${h*0.18}, ${w} -${h*0.66}, 0 -${h} C -${w} -${h*0.66}, -${w} -${h*0.18}, 0 0 Z`;
      path.setAttribute('d', d);
      path.setAttribute('fill','url(#petalGrad)');
      path.setAttribute('stroke','#ffffff22');
      path.setAttribute('stroke-width','1.5');
      path.style.transformOrigin = '0px 0px';
      path.style.transform = 'scale(0.1)';
      path.style.opacity = '0';
      g.appendChild(path);
      return g;
    }

    // Crear hojas
    function createLeaf(angle){
      const g = document.createElementNS('http://www.w3.org/2000/svg','g');
      g.setAttribute('transform',`rotate(${angle}) translate(0,30)`);
      const leaf = document.createElementNS('http://www.w3.org/2000/svg','path');
      const w = 26, h = 120;
      const d = `M 0 20 C ${w} -${h*0.15}, ${w} -${h*0.65}, 0 -${h} C -${w} -${h*0.65}, -${w} -${h*0.15}, 0 20 Z`;
      leaf.setAttribute('d', d);
      leaf.setAttribute('fill','url(#leafGrad)');
      leaf.setAttribute('stroke','#00ffd522');
      leaf.setAttribute('stroke-width','1');
      leaf.style.filter = 'drop-shadow(0 2px 10px rgba(34, 211, 238, .35))';
      g.appendChild(leaf);
      return g;
    }

    // Gradiente hojas
    const defs = document.querySelector('svg defs');
    const leafGrad = document.createElementNS('http://www.w3.org/2000/svg','linearGradient');
    leafGrad.id = 'leafGrad';
    leafGrad.setAttribute('x1','0%'); leafGrad.setAttribute('x2','0%');
    leafGrad.setAttribute('y1','0%'); leafGrad.setAttribute('y2','100%');
    const s1 = document.createElementNS('http://www.w3.org/2000/svg','stop'); s1.setAttribute('offset','0%'); s1.setAttribute('stop-color','#5eead4');
    const s2 = document.createElementNS('http://www.w3.org/2000/svg','stop'); s2.setAttribute('offset','100%'); s2.setAttribute('stop-color','#14b8a6');
    leafGrad.appendChild(s1); leafGrad.appendChild(s2); defs.appendChild(leafGrad);

    // Montar flor
    const angles = [...Array(petalCount).keys()].map(i => i * (360/petalCount));
    angles.forEach(a => petalsGroup.appendChild(createPetal(a)));
    [ -25, 25 ].forEach(a => leavesGroup.appendChild(createLeaf(a)));

    // Chispas decorativas
    function sparkle(){
      const s = document.createElementNS('http://www.w3.org/2000/svg','circle');
      const radius = 120 + Math.random()*60;
      const ang = Math.random()*Math.PI*2;
      const x = Math.cos(ang)*radius, y = Math.sin(ang)*radius;
      s.setAttribute('cx', x.toFixed(2)); s.setAttribute('cy', y.toFixed(2));
      s.setAttribute('r', 1.8 + Math.random()*1.8);
      s.setAttribute('fill', 'white');
      s.style.opacity = '0.9';
      s.style.filter = 'drop-shadow(0 0 10px var(--glow))';
      sparklesGroup.appendChild(s);
      s.animate([
        {opacity: 0, transform: 'scale(0.4)'},
        {opacity: 1, transform: 'scale(1)'},
        {opacity: 0, transform: 'scale(1.6)'}
      ], {duration: 1400, easing:'ease-out'}).onfinish = ()=> s.remove();
    }

    // Animaci√≥n florecer
    let bloomed = false;
    function bloom(){
      const petals = petalsGroup.querySelectorAll('path');
      petals.forEach((p, i) => {
        const delay = i*60;
        p.animate([
          {transform:'scale(0.1)', opacity:0},
          {transform:'scale(1.06)', opacity:1},
          {transform:'scale(1)', opacity:1}
        ], {duration: 900, delay, easing:'cubic-bezier(.2,.8,.2,1)', fill:'forwards'});
      });
      const center = document.getElementById('center');
      center.animate([
        {transform:'scale(0.6)'},
        {transform:'scale(1.15)'},
        {transform:'scale(1)'}
      ], {duration: 600, easing:'ease-out', fill:'forwards'});
      let i=0; const id = setInterval(()=>{ sparkle(); if(++i>22) clearInterval(id); }, 60);
      bloomed = true;
    }

    // Latido
    function heartbeat(){
      const petals = petalsGroup.querySelectorAll('path');
      petals.forEach((p, i)=>{
        const d = 2200 + i*30;
        p.animate([
          {transform:'scale(1)'},
          {transform:'scale(1.025)'},
          {transform:'scale(1)'}
        ], {duration:d, iterations:Infinity, easing:'ease-in-out'});
      });
    }

    // Botones
    document.getElementById('bloomBtn').addEventListener('click', ()=>{
      if(!bloomed){ bloom(); setTimeout(heartbeat, 1100); }
      else {
        bloomed=false;
        const petals = petalsGroup.querySelectorAll('path');
        petals.forEach(p=>{ p.style.transform='scale(0.1)'; p.style.opacity='0'; });
        bloom(); setTimeout(heartbeat, 1100);
      }
    });

    // Descargar como PNG
    document.getElementById('downloadBtn').addEventListener('click', async ()=>{
      const svg = document.getElementById('flower');
      const serializer = new XMLSerializer();
      const svgStr = serializer.serializeToString(svg);
      const svgBlob = new Blob([svgStr], {type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);
      const img = new Image();
      img.onload = function(){
        const scale = 2.5;
        const w = svg.viewBox.baseVal.width * scale;
        const h = svg.viewBox.baseVal.height * scale;
        const canvas = document.createElement('canvas');
        canvas.width = w; canvas.height = h;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#1a1b3a'; ctx.fillRect(0,0,w,h);
        ctx.drawImage(img, 0, 0, w, h);
        const link = document.createElement('a');
        link.download = 'Flor_para_Elizabeth_Valdivieso.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
        URL.revokeObjectURL(url);
      };
      img.src = url;
    });

    // Fecha
    const f = new Date();
    const meses = ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'];
    document.getElementById('today').textContent = `${f.getDate()} de ${meses[f.getMonth()]} de ${f.getFullYear()}`;

    // Florecer al cargar
    window.addEventListener('load', ()=>{ bloom(); setTimeout(heartbeat, 1100); });
  </script>
</body>
</html>
